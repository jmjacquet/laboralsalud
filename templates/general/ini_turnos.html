{% load static from staticfiles %}
{% load i18n %}
{% load bootstrap3 %}

<div id="container" style="width: 100%; height: 100%; margin: 0 auto">
<div class="table-responsive">
    <table width="100%" id="fturnos" class="table table-striped table-hover table-no-bordered tabla_nueva text-nowrap">         
    <thead >
        <tr>
            <th class="no-sort text-center" data-priority="1"></th>
            <th class="imprimir">Fecha/Hora</th>
            <th class="imprimir">Empleado</th>
            <th class="imprimir">Empresa</th>
            <th class="imprimir">Estado</th>
            <th class="imprimir">F.Carga</th>           
            <th class="imprimir">Usuario</th>         
        </tr>
    </thead>
    <tbody>
        {% for t in turnos %}
        <tr>    
            <td class="text-center">
            <a href="{% url 'turnos_detalles' id=t.pk %}" class="modal-detail" data-modal-head="DETALLE TURNO">
                            {{ t.get_turno }}</a>
          </td>
            <td title="{{ t.observaciones|default_if_none:''}}">{{ t.fecha|date:'d/m/Y' }} {{ t.hora|time:"H:i" }}hs</td>
            <td title="{{ t.empleado|default_if_none:''}}"><a href="{% url 'empleado_detalles' id=t.empleado.id %}"  class="modal-detail" data-modal-head="DETALLE EMPLEADO {{t.empleado.legajo}}" data-fm-callback="reload"><strong>{{ t.empleado|default_if_none:''|truncatechars:60 }}</strong></a></td>
            <td title="{{ t.empresa|default_if_none:''}}">{{ t.empresa|default_if_none:''|truncatechars:60 }}</td>
            <td>{{ t.get_estado_display|default_if_none:'' }}</td>
            <td>{{ t.fecha_creacion|date:'d/m/Y' }}</td>
            <td>{{ t.usuario_carga|default_if_none:'' }}</td>                    
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
      <tr>
          <th></th>
          <th></th>
          <th></th> 
          <th></th>
          <th></th> 
          <th></th>
          <th></th> 
      </tr>
  </tfoot>            		            
    
</table> 
</div>
</div>

  
<script type="text/javascript">

$(document).ready(function() { 
   
moment.locale('es');
$.fn.dataTable.moment('DD/MM/YYYY'); 

var tabla = $('#fturnos').DataTable({
            "language": {
                "decimal": ",",
                "thousands": ".",                 
                "sProcessing": "Procesando...",
                "sLengthMenu": "Mostrar _MENU_ registros",
                "sZeroRecords": "No se encontraron resultados",
                "sEmptyTable": "No hay registros en esta tabla",
                "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                "sInfoPostFix": "",
                "sSearch": "Buscar:",
                "sUrl": "",
                "sInfoThousands": ",",
                "sLoadingRecords": "Cargando...",
                "oPaginate": {
                    "sFirst": "Primero",
                    "sLast": "Ãšltimo",
                    "sNext": "Siguiente",
                    "sPrevious": "Anterior"
                },
                "oAria": {
                    "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                    "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                },
                "decimal": ",",
                "thousands": ".",                
            },                      
           
         "columnDefs": [ {
                  "targets"  : 'no-sort',
                  "orderable": false,
                }],          
           "paging":   false,
           "lengthMenu": [[20, 50, -1], [20, 50, "Todos"]],
           "autoWidth": false,
           "order": [],
           "colReorder": false,
           "searching": true,
            fixedHeader: {
              header: false,
              footer: false
              },
            responsive: false,            
            dom: '',
            PreDrawCallback:function(){
            $("#cargando").show();
            },
            initComplete: function () {
               // this.api().columns().every( function () {[0, 1, 9]                
                $("#fturnos").show();
                  this.fnAdjustColumnSizing();
                $("#cargando").hide();
            },
            
        });




});
</script> 
